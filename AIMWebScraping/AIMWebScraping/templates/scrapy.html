{% extends "layout.html" %}
{% block head %}
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<script type=text/javascript>
	$(function () {
		$('a#scrapy').click(function () {
			$.ajax({
				url: '/scrapy_test',
				data: { year: $('#year').val() },
				success: function (data) {
					console.log('get info');
					$('#results2').html(JSON.stringify(data, null, '   '));
				}
			});
		});
	})
</script>

<script type=text/javascript>
	$(function () {
		$('a#full').click(function () {
			$.ajax({
				url: '/full_brickset',
				success: function (data) {
					console.log('get info');
					$('#results2').html(JSON.stringify(data, null, '   '));
				}
			});
		});
	})
</script>

<script type=text/javascript>
	$(function () {
		$('a#demo').click(function () {
			$.ajax({
				url: '/scrapy_demo',
				success: function (data) {
					console.log('get info');
					$('#results2').html(JSON.stringify(data, null, '   '));
				}
			});
		});
	})
</script>
{% endblock %}
{% block content %}

<h2>{{ title }}.</h2>

<blockquote>
	Scrapy is a web crawling/scraping framework that employs "spiders", or self contained web crawlers, to carry out instructions. This framework is written using Twisted, a non-blocking event driven networking framework
</blockquote>

<div class="panel-group" id="definition_accordion">
	<div class="panel panel-default">
		<div class="panel-heading">
			<h2 class="panel-title">
				<a data-toggle="collapse" data-parent="#definition_accordion" href="#collapse_crawler">
					Scrapy Framework
				</a>
			</h2>
		</div>
		<div id="collapse_crawler" class="panel-collapse collapse in">
			<div class="panel-group" id="crawler_accordion" style="padding: 10px;">
				<div class="panel panel-default">
					<div class="panel-heading">
						<h4 class="panel-title">
							<a data-toggle="collapse" data-parent="#crawler_accordion" href="#collapse_features">
								Features
							</a>
						</h4>
					</div>
					<div id="collapse_features" class="panel-collapse collapse in">
						<ul>
							<li>Asynchronous Requests and Processing</li>
							<li>Built in tools for parsing, selecting, and extracting information</li>
							<li>XPath and CSS Selector Support</li>
							<li>Interactive Shell Console</li>
							<li>JSON, CSV and XML Data Feed Exports</li>
							<li>Pipeline Archetecture</li>
							<li>Automatically corrects foreign, non-standard and broken encoding</li>
							<li>Cookie and Session Handling</li>
						</ul>
					</div>
				</div>

				<div class="panel panel-default">
					<div class="panel-heading">
						<h4 class="panel-title">
							<a data-toggle="collapse" data-parent="#crawler_accordion" href="#collapse_demo">
								Extract Table Data
							</a>
						</h4>
					</div>
					<div id="collapse_demo" class="panel-collapse collapse">
						<h2><a target="_blank" href="http://testing-ground.scraping.pro/table">Link</a></h2>
						<a href=# id=demo><button class='btn btn-default'>Test</button></a>
					</div>
				</div>
				<div class="panel panel-default">
					<div class="panel-heading">
						<h4 class="panel-title">
							<a data-toggle="collapse" data-parent="#crawler_accordion" href="#collapse_full">
								Full Demo - Lego Price Scraper
							</a>
						</h4>
					</div>
					<div id="collapse_full" class="panel-collapse collapse">
						<ul>
							<li>Extracts the Year links from <a href="https://brickset.com/browse/sets">Brickset</a></li>
							<li>Crawls the sets for that year</li>
							<li>Scrapes information about the set</li>
							<li>Crawls and scrapes <a href="https://www.bricklink.com/v2/catalog/catalogitem.page?S=10260-1#T=P">bricklink</a> to extract pricing info</li>
							<li>Compares average sale price to min price for sale</li>
							<li>Sends notification via Office 365 Webhook to Team when price is 20% below average sale price</li>
						</ul>
						<a href=# id=full><button class='btn btn-default'>Full Brickset</button></a>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}
