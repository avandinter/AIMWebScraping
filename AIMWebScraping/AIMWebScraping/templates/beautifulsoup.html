{% extends "layout.html" %}
{% block head %}

<script type=text/javascript>
	function send_direction(direction) {
		return $.ajax({
			url: '/beautifulsoup_navigation_demo',
			data: { direction: direction },
			success: function (data) {
				info = JSON.parse(data)

				var codeElement = document.getElementById('element_html');
				codeElement.innerHTML = "";
				CodeMirror(
					codeElement,
					{
						value: info.html,
						mode: "xml",
						htmlMode: true,
						lineNumbers: true,
						readOnly: true
					}
				);
			}
		});
	}

	$(function () {
		$('a#nav_up').click(function () {
			send_direction("up")
		});
	})

	$(function () {
		$('a#nav_none').click(function () {
			send_direction("none")
		});
	})

	$(function () {
		$('a#nav_forward').click(function () {
			send_direction("forward")
		});
	})

	$(function () {
		$('a#nav_back').click(function () {
			send_direction("back")
		});
	})

	function filter(filter_tag) {
		return $.ajax({
			url: '/beautifulsoup_strainer_demo',
			data: { tag: filter_tag },
			success: function (data) {
				info = JSON.parse(data)
				var codeElement = document.getElementById('strainer_out');
				codeElement.innerHTML = "";
				CodeMirror(
					codeElement,
					{
						value: info.html,
						mode: "xml",
						htmlMode: true,
						lineNumbers: true,
						readOnly: true
					}
				);
			}
		});
	}

	$(function () {
		$('a#strainer_td').click(function () {
			filter("td");
		});
	})

	$(function () {
		$('a#strainer_a').click(function () {
			filter("a");
		});
	})

	$(function(){
		$('a#search').click(function () {
			$.ajax({
				url: '/beautifulsoup_google_demo',
				data: {
					search: $("#search_term").val()
				},
				success: function (data) {
					info = JSON.parse(data)
					$("#google_results").append(info.links)
				}
			});
		});
	})
</script>

{% endblock %}
{% block content %}

<h2>{{ title }}</h2>
<blockquote>
	Beautiful Soup is a parsing library for HTML and XML used for navigating, searching and extracting information from web pages.
</blockquote>

<div class="panel-group" id="definition_accordion">
	<div class="panel panel-default">
		<div class="panel-heading">
			<h2 class="panel-title">
				<a data-toggle="collapse" data-parent="#definition_accordion" href="#collapse_crawler">
					Beautiful Soup for web scraping and crawling
				</a>
			</h2>
		</div>
		<div id="collapse_crawler" class="panel-collapse collapse in">
			<div class="panel-group" id="crawler_accordion" style="padding: 10px;">
				<div class="panel panel-default">
					<div class="panel-heading">
						<h4 class="panel-title">
							<a data-toggle="collapse" data-parent="#crawler_accordion" href="#collapse_features">
								Features
							</a>
						</h4>
					</div>
					<div id="collapse_features" class="panel-collapse collapse in">
						<ul>
							<li>XML, HTML and HTML5 parsing support</li>
							<li>Able to sanitize, clean and beautify HTML code</li>
							<li>Able to update depreciated tags (ex: center)</li>
							<li>Navigate through parent/child and sibling relationships</li>
							<li>CSS selector support</li>
						</ul>
					</div>
				</div>
				<div class="panel panel-default">
					<div class="panel-heading">
						<h4 class="panel-title">
							<a data-toggle="collapse" data-parent="#crawler_accordion" href="#collapse_navigation">
								HTML Navigation
							</a>
						</h4>
					</div>
					<div id="collapse_navigation" class="panel-collapse collapse">
						<h2><a target="_blank" href="http://testing-ground.scraping.pro/table">Link</a></h2>
						<a href=# id="nav_none"><button class='btn btn-default'>Get Default Element</button></a>
						<a href=# id="nav_up"><button class='btn btn-default'>Get First Parent</button></a>
						<a href=# id="nav_forward"><button class='btn btn-default'>Get Next Sibling</button></a>
						<a href=# id="nav_back"><button class='btn btn-default'>Get Previous Sibling</button></a>
						<br />
						<h3>Element : </h3>
						<pre><code id="element_html"></code></pre>
					</div>
				</div>
				<div class="panel panel-default">
					<div class="panel-heading">
						<h4 class="panel-title">
							<a data-toggle="collapse" data-parent="#crawler_accordion" href="#collapse_strainer">
								Soup Strainer
							</a>
						</h4>
					</div>
					<div id="collapse_strainer" class="panel-collapse collapse">
						<h2><a target="_blank" href="http://testing-ground.scraping.pro/table">Link</a></h2>
						<a href=# id="strainer_td"><button class='btn btn-default'>Get td elements</button></a>
						<a href=# id="strainer_a"><button class='btn btn-default'>Get all links</button></a>
						<br />
						<h3>Tags : </h3>
						<pre><code id="strainer_out"></code></pre>
					</div>
				</div>
				<div class="panel panel-default">
					<div class="panel-heading">
						<h4 class="panel-title">
							<a data-toggle="collapse" data-parent="#crawler_accordion" href="#collapse_google">
								Google Search
							</a>
						</h4>
					</div>
					<div id="collapse_google" class="panel-collapse collapse">
						<label>Search </label><input id="search_term" value="python" />
						<a href=# id="search"><button class='btn btn-default'>Search</button></a>
						<br />
						<h3>Top results : </h3>
						<ul id="google_results"></ul>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}
